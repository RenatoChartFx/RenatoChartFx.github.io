(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{586:function(e,t,r){var content=r(625);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(28).default)("66fcd2ea",content,!0,{sourceMap:!1})},624:function(e,t,r){"use strict";r(586)},625:function(e,t,r){var c=r(27)(!1);c.push([e.i,".resource-thumbnail[data-v-66fc4334]{border:3px solid transparent;cursor:pointer}.resource-thumbnail.selected[data-v-66fc4334]{border-color:#2ec4b6!important}",""]),e.exports=c},635:function(e,t,r){"use strict";r.r(t);var c=r(0),o=(r(15),r(138),{name:"StockResourceSelector",props:{resource:{type:Object,default:function(){}},initSearchTerm:{type:String,default:null},setSelection:{type:Function,default:function(){}}},data:function(){return{itemsPerPage:21,currentPage:1,searchTerm:null,searchedResources:[],loading:!1,selectedResource:null,searchError:null}},computed:{nextPageActive:function(){return!this.searchedResources.length<this.itemsPerPage},stockProvider:function(){return"Video"===this.resource.MediaType?{Name:"Pexels",URL:"https://www.pexels.com/"}:{Name:"Unsplash",URL:"https://www.unsplash.com/"}}},watch:{selectedResource:function(){this.setSelection(this.selectedResource,this.resource)}},mounted:function(){this.initSearchTerm&&(this.searchTerm=this.initSearchTerm,this.onSearchStockMedia())},methods:{searchNextPage:function(){this.currentPage+=1,this.onSearchStockMedia()},searchPrevPage:function(){this.currentPage-=1,this.onSearchStockMedia()},onSearchStockMedia:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/data/pc/util/unsplash_search","Video"==e.resource.MediaType&&"/data/pc/util/pexels_search",t.prev=2,e.searchedResources=[],e.loading=!0,t.next=7,e.$api.songfolder.searchStockResources(e.resource.MediaType,e.searchTerm.trim(),e.currentPage);case 7:r=t.sent,console.log(r),e.loading=!1,e.searchedResources=r,t.next=18;break;case 13:t.prev=13,t.t0=t.catch(2),e.loading=!1,e.searchError="Oops...something went wrong. Please try again.",console.warn(t.t0);case 18:case"end":return t.stop()}}),t,null,[[2,13]])})))()}}}),n=(r(624),r(8)),component=Object(n.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-md-column flex-xl-row w-100"},[t("div",{staticClass:"col-sm-12 col-xl-4 ps-1 d-flex align-xl-items-center place-content-xl-center place-content-sm-stretch"},[t("div",{staticClass:"position-relative w-100 mt-xl-4 me-sm-5"},[t("div",{staticClass:"card position-relative img-preview mx-auto",staticStyle:{"max-width":"300px"}},["Image"==e.resource.MediaType?[e.selectedResource?e._e():t("div",{staticClass:"preview"}),e._v(" "),t("div",{staticClass:"preview",staticStyle:{"aspect-ratio":"1/1","background-size":"cover","background-position":"center"},style:e.selectedResource?e.selectedResource.imageUrl?"background-image: url("+e.selectedResource.imageUrl+")":"background-image: url(songtools/img/placeholders/sfp_SongImage.svg)":e.resource&&""!=e.resource.FileURL?"background-image: url("+e.resource.FileURL+")":"background-image: url(songtools/img/placeholders/sfp_SongImage.svg)"})]:"Video"==e.resource.MediaType?[e.selectedResource&&e.selectedResource.url?t("video",{key:"vp_"+e.selectedResource.url,staticClass:"preview",staticStyle:{"max-height":"300px"},attrs:{controls:""}},[t("source",{attrs:{src:e.selectedResource.url,type:"video/mp4"}})]):t("div",{staticClass:"preview",staticStyle:{"min-height":"300px","background-image":"url(songtools/img/placeholders/sfp_SongImage.svg)","aspect-ratio":"1/1","background-size":"cover","background-position":"center"}})]:e._e()],2),e._v(" "),e.selectedResource?t("p",{staticClass:"text-muted text-small fst-italic text-end p-1"},[e._v("\n        by "),t("a",{attrs:{href:e.selectedResource.AttributionUrl,target:"new"}},[e._v(e._s(e.selectedResource.Attribution))]),e._v(" via  "),t("a",{attrs:{href:e.stockProvider.URL,target:"new"}},[e._v(e._s(e.stockProvider.Name))])]):e._e()])]),e._v(" "),t("div",{staticClass:"col-sm-100 flex-grow-1 mt-4"},[t("div",{staticClass:"d-flex flex-row align-items-center"},[t("div",{staticClass:"col flex-grow-1 mb-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Search term"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex-grow-0"},[t("button",{staticClass:"btn btn-transparent mb-2 p-2 ps-4 outline-none shadow-none",staticStyle:{outline:"none"},on:{click:function(t){return t.stopPropagation(),e.onSearchStockMedia()}}},[t("FontAwesomeIcon",{staticClass:"fs-4",attrs:{icon:["fas","search"]}})],1)])]),e._v(" "),e.loading?t("div",{staticClass:"d-flex flex-row align-items-center justify-content-center",staticStyle:{"min-height":"100px"}},[t("FontAwesomeIcon",{staticClass:"fs-3 text-muted fa-spin",attrs:{icon:["fas","compact-disc"]}})],1):e.searchError?t("div",{staticClass:"text-muted fst-italic p-2"},[e._v("\n      "+e._s(e.searchError)+"\n    ")]):0==e.searchedResources.length?t("div",{staticClass:"d-flex flex-row align-items-center"},[t("p",{staticClass:"text-muted"},[e._v("\n        No results found. Try a different search term.\n      ")])]):t("div",{staticClass:"d-flex flex-row align-items-center position-relative ms-2"},[t("div",{staticClass:"flex-grow-0 flex-shrink-0 position-absolute",staticStyle:{left:"-50px"}},[t("button",{staticClass:"bg-transparent border-0",class:{disabled:1==e.currentPage},attrs:{disabled:1==e.currentPage},on:{click:function(t){return t.stopPropagation(),e.searchPrevPage()}}},[t("FontAwesomeIcon",{staticClass:"fs-3 mx-2",attrs:{icon:["fas","angle-left"]}})],1)]),e._v(" "),t("div",{staticClass:"flex-grow-1"},[t("div",{staticClass:"d-flex flex-row flex-wrap align-items-center position-relative"},e._l(e.searchedResources,(function(r,c){return t("div",{key:"resourceItem"+c,staticClass:"resource-thumbnail m-1",class:{"selected box-shadow":e.selectedResource==r},staticStyle:{width:"60px",height:"60px","background-size":"cover","background-position":"center center","aspect-ratio":"1/1"},style:"background-image: url("+r.imageUrl+")",on:{click:function(t){t.stopPropagation(),e.selectedResource=r}}})})),0)]),e._v(" "),t("div",{staticClass:"flex-grow-0 flex-shrink-0"},[t("button",{staticClass:"bg-transparent border-0",class:{disabled:!e.nextPageActive},attrs:{disabled:!e.nextPageActive},on:{click:function(t){return t.stopPropagation(),e.searchNextPage()}}},[t("FontAwesomeIcon",{staticClass:"fs-3 mx-2",attrs:{icon:["fas","angle-right"]}})],1)])])])])}),[],!1,null,"66fc4334",null);t.default=component.exports}}]);