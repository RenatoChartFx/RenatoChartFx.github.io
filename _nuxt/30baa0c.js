(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{601:function(t,e,n){var content=n(640);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("717e2446",content,!0,{sourceMap:!1})},639:function(t,e,n){"use strict";n(601)},640:function(t,e,n){var o=n(27)(!1);o.push([t.i,".activate-btn .playlist-icon[data-v-6d75edcc]{width:16px;height:16px}.activate-btn[data-v-6d75edcc]:hover{background-color:#2ec4b6;border-color:#4fd6c9;color:#fff;fill:#fff}.btn-cancel .icon[data-v-6d75edcc]{color:#ff1241}.btn-cancel[data-v-6d75edcc]:hover{background-color:#ff1241;color:#fff}.btn-cancel:hover .icon[data-v-6d75edcc]{color:#fff}.btn-begin[data-v-6d75edcc]{border-color:#2e2e2e}.btn-begin[data-v-6d75edcc]:hover{background-color:#474747!important;color:#f9fafa}.btn-text .hover-text[data-v-6d75edcc]{position:absolute;left:0;right:0;display:none}.hovered[data-v-6d75edcc]{position:relative}.hovered .action-text[data-v-6d75edcc]{opacity:0}.hovered .hover-text[data-v-6d75edcc]{display:inline-block}.btn-confirm:hover .btn-tooltip .icon[data-v-6d75edcc]{color:#fff}.artist-info-btn[data-v-6d75edcc]{border:none;text-align:left;padding:0 0 .72rem}.artist-info-btn .icon-up[data-v-6d75edcc],.artist-info-btn[data-v-6d75edcc]:after{display:none}.artist-info-btn.show .icon.icon-up[data-v-6d75edcc]{display:block}.artist-info-btn.show .icon.icon-down[data-v-6d75edcc]{display:none}",""]),t.exports=o},776:function(t,e,n){"use strict";n.r(e);n(41),n(32),n(55),n(23),n(56);var o=n(0),r=n(18),c=(n(15),n(86),n(31),n(11),n(34));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={name:"PackageGroupPurchaseButton",props:{action:{type:Function,default:function(){}},groupItems:{type:Array,default:[]},groupName:{type:String,default:""}},data:function(){return{selectedCreditPackage:null,loading:!1}},computed:d(d(d({},Object(c.c)("user",["user"])),Object(c.c)("artist",["selectedSong","membershipIncludedCampaigns","accountCampaigns"])),{},{percentageToExpiration:function(){return this.channelCampaignDaysLeft&&this.channelCampaignPeriodDays&&100*Number(this.channelCampaignDaysLeft/this.channelCampaignPeriodDays)||0},availableCampaignSlots:function(){return this.$store.getters["artist/membershipAvailableCampaigns"]},isPlaylistingCampaignActive:function(){var t=this.$route.params.SongId;return!!t&&(this.accountCampaigns&&this.accountCampaigns.filter((function(e){return"Active"==e.Status&&"Playlisting"==e.Type&&e.TrackId==t})).length>0)},progressClass:function(){var t=this.percentageToExpiration;return t>50?"bg-primary":t<30?"bg-danger":"bg-warning"},packIcon:function(){return this.packageGroupIcon(this.groupName)},channelCampaignPeriodDays:function(){if(this.selectedCreditPackage){var t=new Date(this.selectedCreditPackage.ChannelPurchasedOn),e=new Date(this.selectedCreditPackage.ChannelEndingOn);return Math.floor((e-t)/1e3*60*60*24)}return null},channelCampaignDaysLeft:function(){if(this.selectedCreditPackage){var t=new Date(this.selectedCreditPackage.ChannelEndingOn),e=new Date;return t-e>0?Math.floor((t-e)/1e3*60*60*24):0}return null},membershipCampaignAvailabilityDescription:function(){var t="Activate Campaign";return this.availableCampaignSlots&&(t="Activate now to use one of your ("+this.availableCampaignSlots+") available playlist campaign(s)."),t}}),watch:{selectedCreditPackage:function(){$(".dropdown-toggle.show").dropdown("hide")}},mounted:function(){this.selectedCreditPackage=this.groupItems[0],$("[data-bs-toggle=tooltip]").tooltip()},methods:{onSelectMembershipOption:function(t){this.action(t)},onChangePromoStatus:function(t){"Active"==t&&this.$store.getters["artist/isSelectedSongPromoted"]?this.onProcessPromoActivation():this.changePromoStatus(this.$store.getters["artist/accountCampaignSelection"],t)}},changePromoStatus:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if((r=n).loading){o.next=9;break}return r.loading=!0,o.next=5,n.$api.artist.pausePromotionId(t.BatchId,e);case 5:return c=o.sent,n.$store.dispatch("artist/onLoadAccountCampaigns"),r.loading=!1,o.abrupt("return",c);case 9:return r.loading=!1,o.abrupt("return",null);case 11:case"end":return o.stop()}}),o)})))()},onProcessPromoActivation:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},(o=t).loading=!0,""==o.trackToPromote.PreviewUrl&&null,n.BatchId=t.generateUUID(),n.Type="Promotion","label"==o.user.UserType?(n.dbLabelId=o.user.Id,n.dbUserId=o.selectedSong.dbArtistId):n.dbUserId=o.user.Id,n.dbArtistId=o.selectedSong.dbArtistId,n.SpotifyArtistId=o.selectedSong.SpotifyArtistId,n.SongSpotifyArtistName=o.selectedSong.SongSpotifyArtistName,n.SpotifySongId=o.selectedSong.TrackId,n.SongName=o.selectedSong.SongName,n.SongImage=o.selectedSong.AlbumImage,n.SongDuration=Number(o.selectedSong.Duration),n.SongPreviewURL=o.selectedSong.SongPreviewURL,n.Status="Active",e.next=19,t.saveTransaction(n).then((function(data){console.log("saved transaction"),o.reloadArtistInfo(),o.view="success",o.isProcessing=!1,console.log("done processing")})).fail((function(t){console.warn(t),console.log("Error saving promotion.".concat(t.body.status.message)),o.view="errorProcessing",o.isProcessing=!1}));case 19:case"end":return e.stop()}}),e)})))()}},f=(n(639),n(8)),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"position-relative mb-2 mx-3 d-inline-block",staticStyle:{"z-index":"99"}},[e("label",{staticClass:"upper-label"},[t._v(t._s("playlist"==t.groupName?"Playlister.club":t.groupName)+" Campaign")]),t._v(" "),"playlist"==t.groupName&&t.availableCampaignSlots>0?e("div",{staticClass:"d-flex flex-row flex-nowrap align-items-start"},[e("div",[e("button",{staticClass:"btn btn-rounded btn-outline-dark activate-btn mt-1 px-2",staticStyle:{"min-width":"235px"},on:{click:function(e){return e.stopPropagation(),t.onChangePromoStatus("Active")}}},[e("div",{staticClass:"d-flex flex-row align-items-start align-content-start"},[e("div",{staticClass:"col flex-grow-0 px-1"},[e("UIPlaylisterClubIcon",{staticClass:"playlist-icon"})],1),t._v(" "),e("div",{staticClass:"col flex text-start text-nowrap ps-2"},[t._v("\n            Activate Campaign\n          ")]),t._v(" "),e("div",{staticClass:"col flex-grow-0 ms-auto px-2"},[e("a",{staticClass:"m-0 p-0 px-0 text-auto lh-1",staticStyle:{color:"inherit"},attrs:{role:"button","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-title":t.membershipCampaignAvailabilityDescription||"Activate Campaign"}},[e("FontAwesomeIcon",{staticClass:"fs-6",attrs:{icon:["far","info-circle"]}})],1)])])]),t._v(" "),t.membershipIncludedCampaigns>1?[e("div",{staticClass:"d-flex mt-2 flex-row w-100 align-items-center justify-content-stretch"},t._l(t.membershipIncludedCampaigns,(function(n){return e("div",{key:"campaignSlot_"+n,staticClass:"flex flex-grow-1 me-1 border rounded",class:n<t.membershipIncludedCampaigns-t.availableCampaignSlots?"bg-primary":"bg-gray-300",staticStyle:{height:"3px"}})})),0)]:t._e()],2)]):t.selectedCreditPackage?[e("div",{staticClass:"d-flex flex-row flex-nowrap align-items-center"},[t.selectedCreditPackage?e("UIPackagePurchaseButton",{key:"pb_"+t.selectedCreditPackage.PackageId,staticStyle:{"min-width":"235px"},attrs:{label:t.selectedCreditPackage.Name,action:t.onSelectMembershipOption,icon:t.packIcon,"credit-package":t.selectedCreditPackage,price:t.selectedCreditPackage.Price,description:t.selectedCreditPackage.Description,hexagons:0}}):t._e(),t._v(" "),t.groupItems.length>1?[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn dropdown-toggle bg-transparent fs-4 w-100 artist-info-btn shadow-none p-0 ms-3",attrs:{type:"button","data-bs-toggle":"dropdown","aria-expanded":"false","data-bs-auto-close":"true"}},[e("div",{staticClass:"col icon-container align-self-end flex-grow-0"},[e("FontAwesomeIcon",{staticClass:"icon icon-down",attrs:{icon:["fas","angle-down"]}}),t._v(" "),e("FontAwesomeIcon",{staticClass:"icon icon-up",attrs:{icon:["fas","angle-up"]}})],1)]),t._v(" "),t.groupItems&&t.groupItems.length>1?e("ul",{staticClass:"dropdown-menu dropdown-menu-end shadow p-1",staticStyle:{"min-width":"250px","max-height":"40vh"}},[t._l(t.groupItems,(function(n){return[e("li",{key:"pgci_ "+n.PackageId},[e("UIPackagePurchaseButton",{key:"pb_"+n.PackageId,staticClass:"border-0 w-100 p-0",attrs:{label:n.Name,"is-incremental-purchase":"dads"===n.ServiceGroup.toLowerCase(),action:t.onSelectMembershipOption,icon:t.packIcon,"credit-package":n,price:n.Price,description:n.Description,hexagons:0,"btn-style":"min-width: 235px; border-radius:0 !important; border-color:transparent"}})],1)]})),t._v(" "),t.isPlaylistingCampaignActive?e("li",{staticClass:"pb-2"},[e("button",{staticClass:"dropdown-item p-2 btn-cancel",on:{click:function(e){return e.stopPropagation(),t.onChangePromoStatus("Expired")}}},[e("div",{staticClass:"row flex-nowrap"},[e("div",{staticClass:"col flex-grow-0 text-nowrap fw-bold px-1 ms-1 ps-2 ms-2"},[e("FontAwesomeIcon",{staticClass:"icon fs-5",attrs:{icon:["fas","octagon-exclamation"]}})],1),t._v(" "),e("div",{staticClass:"col flex text-nowrap text-start ps-1",staticStyle:{"font-weight":"500"}},[t._v("\n                    Stop Campaign\n                  ")])])])]):t._e()],2):t._e()])]:t._e()],2),t._v(" "),""!=t.selectedCreditPackage.ChannelPurchasedOn?e("div",{staticClass:"gauge-container mb-2",staticStyle:{"margin-left":"10px","margin-right":"40px"}},[e("div",{staticClass:"progress mt-1",staticStyle:{height:"5px"},attrs:{"data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:t.channelCampaignDaysLeft+" days left"}},[e("div",{staticClass:"progress-bar",class:t.progressClass,style:"width: "+t.percentageToExpiration+"%;",attrs:{role:"progressbar","aria-valuenow":t.channelCampaignDaysLeft,"aria-valuemin":"0","aria-valuemax":t.channelCampaignPeriodDays}})])]):t._e()]:t._e()],2)}),[],!1,null,"6d75edcc",null);e.default=component.exports;installComponents(component,{UIPlaylisterClubIcon:n(326).default,UIPackagePurchaseButton:n(320).default})}}]);