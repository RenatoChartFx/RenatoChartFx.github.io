(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{765:function(e,t,o){var content=o(860);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(28).default)("6b79050e",content,!0,{sourceMap:!1})},859:function(e,t,o){"use strict";o(765)},860:function(e,t,o){var r=o(27)(!1);r.push([e.i,".explanation[data-v-c1a15f0c]{color:#4b4b4b}.explanation .icon[data-v-c1a15f0c]{font-size:1rem;color:#d1d1d1;margin-right:5px}.leaflet-container[data-v-c1a15f0c]{background:linear-gradient(0deg,#f5f5f4,#efefef,#f5f5f4)}.map[data-v-c1a15f0c]{height:100%;position:relative}.map-container[data-v-c1a15f0c]{min-height:500px;flex:1;position:relative}h3[data-v-c1a15f0c]{margin:40px 0 0}ul[data-v-c1a15f0c]{list-style-type:none;padding:0}li[data-v-c1a15f0c]{display:inline-block;margin:0 10px}a[data-v-c1a15f0c]{color:#42b983}.success[data-v-c1a15f0c]{background-color:#1dba54}.danger[data-v-c1a15f0c]{background-color:#ff1241}.warning[data-v-c1a15f0c]{background-color:#ffc107}",""]),e.exports=r},928:function(e,t,o){"use strict";o.r(t);var r=o(0),n=(o(15),o(64),o(86),o(80),o(46),o(65),o(31),o(11),o(677)),c=o.n(n),l=o(753),f={name:"GeoMap",components:{},props:{},data:function(){return{show:!1,geojson:null,zoom:2,enableTooltip:!0,mapData:null}},computed:{selectedSong:function(){return this.$store.getters["artist/selectedSong"]},options:function(){return{zoomControl:!0,attributionControl:!1,dragging:!0,zooming:!0,scrollWheelZoom:!1,doubleClickZoom:!1,stroke:!1,boxZoom:!0,fillColor:"transparent",onEachFeature:this.onEachFeatureFunction()}},topCountries:function(){return this.mapData&&this.mapData.length>0?this.mapData.slice(0,10):null},maxValue:function(){if(this.mapData&&this.mapData.length>0){var e=Math.ceil(Number(this.mapData[0].SampleAvg)+2*Number(this.mapData[0].SampleStdDev));return e>this.mapData[0].Attractiveness?e:this.mapData[0].Attractiveness}return 100}},watch:{},mounted:function(){this.loadMap()},methods:{mapLoaded:function(){console.log(this.$refs.myMap),this.$refs.myMap.mapObject.setView([20,0])},resetHighlight:function(e){console.log(L.geoJSON(),e.target),L.geoJSON().resetStyle(e.target)},highlightFeature:function(e){var t=e.target;t.setStyle({weight:15,color:"#666",dashArray:"2",fillOpacity:.5}),t.bringToFront(),L.Browser.ie||L.Browser.opera||L.Browser.edge||t.bringToFront()},FeatureHover:function(e,t){t.on({mouseover:this.highlightFeature,mouseout:this.resetHighlight})},onEachFeatureFunction:function(){return this.enableTooltip?function(e,t){t.bindTooltip("\n          <div><label>".concat(e.properties.Country||e.properties.name,": </label> <strong>").concat(e.properties.Attractiveness||"--","</strong></div>\n\n          "),{permanent:!1,sticky:!0})}:function(){}},zoomToFeature:function(e){this.$refs.myMap.mapObject.fitBounds(e.target.getBounds())},loadMapData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.geojson=l,o=e.selectedSong,t.prev=2,t.next=5,e.$api.data.get("/data/pc/playlists/getgeoplaylistabilityforsong",{a:o.Acousticness?o.Acousticness:0,d:o.Danceability?o.Danceability:0,e:o.Energy?o.Energy:0,i:o.Instrumentalness?o.Instrumentalness:0,p:o.Popularity?o.Popularity:0,r:o.ReleaseDate?o.ReleaseDate:"09/09/1980",t:o.Tempo?o.Tempo:0,s:o.Speechiness?o.Speechiness:0,v:o.Valence?o.Valence:0,spotifysongid:e.selectedSong.TrackId});case 5:data=t.sent,console.log(data),e.mapData=data.data,e.geojson.features.map((function(t){var o=e.mapData.filter((function(e){if(e.Country===t.properties.name||e.Country===t.properties.Country)return e}));return o.length>0?t.properties=o[0]:(t.properties.Attractiveness="",t.properties.SampleAvg="",t.properties.SampleStdDev=""),t})),(r=e).$refs.myMap&&L.geoJson(r.geojson,{style:r.regionStyle}).addTo(r.$refs.myMap.mapObject),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.warn(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))()},getPromotionStat:function(e,t){return console.log(e),e?e.filter((function(e){return e.Type===t}))[0].Value:null},getRegionColor:function(e){var t="#ddd";if(e.Attractiveness){var o=Number(e.Attractiveness),r=(Number(e.SampleAvg),Number(2*e.SampleStdDev)),n=Number(e.SampleAvg)+r,c=Number(e.SampleAvg)-r,l=Math.ceil(n-c)/9,f=Math.ceil((o-c)/l);switch(f<1&&(f=1),f>9&&(f=9),f){case 9:t="rgba(89, 194, 127, 1)";break;case 8:t="rgba(101,198,139, 0.8)";break;case 7:t="rgba(107,200,147, 0.8)";break;case 6:t="rgba(111,203,157, 0.7)";break;case 5:t="rgba(109,204,163, 0.6)";break;case 4:t="rgba(105,205,169, 0.4)";break;case 3:t="rgba(95,203,173, 0.3)";break;case 2:t="rgba(83,202,178, 0.2)";break;case 1:t="rgba(49,195,175, 0.1)";break;default:t="rgba(175,195,175, 0.5)"}}return t},regionStyle:function(e){return{fillColor:c()(this.getRegionColor(e.properties)),stroke:!0,color:c()(this.getRegionColor(e.properties)).lighten(.05).desaturate(.05),weight:2,opacity:1,dashArray:"2",fillOpacity:1,strokeOpacity:.5}},regionCssClass:function(e){var t="thermal-10";return e.properties.attractiveness>50?t="thermal-1":e.properties.attractiveness>30&&(t="thermal-5"),t},loadMap:function(){this.loadMapData(),this.show=!0}}},m=f,d=(o(859),o(8)),component=Object(d.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"column flex"},[t("div",{staticClass:"row",staticStyle:{position:"relative"}},[t("div",{staticClass:"column flex map-container"},[e.geojson&&e.mapData?[t("l-map",{ref:"myMap",staticClass:"map",attrs:{zoom:e.zoom,options:e.options},on:{ready:function(t){return e.mapLoaded()}}},[e.show?t("l-geo-json",{ref:"myGeoMap",attrs:{geojson:e.geojson,options:e.options}}):e._e()],1)]:e._e()],2)])])}),[],!1,null,"c1a15f0c",null);t.default=component.exports}}]);